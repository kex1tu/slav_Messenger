# Slav Messenger

**Slav Messenger** — защищённый мессенджер с открытым исходным кодом, реализующий сквозное шифрование (E2EE) и поддержку VoIP. Проект включает десктопный клиент на Qt, веб-клиент и серверную часть на C++/Go.

## Основные возможности

### Безопасность
- **Сквозное шифрование (E2EE)** с использованием [Monocypher](https://monocypher.org/)
- Криптография на базе **X25519** (обмен ключами), **ChaCha20-Poly1305** (шифрование)
- Хеширование паролей через **Argon2**
- Защищённый обмен сообщениями и файлами

### Коммуникация
- Текстовые сообщения в личных и групповых чатах
- VoIP-звонки с использованием **Opus codec** (версия 1.5.2)
- Передача файлов с шифрованием
- WebSocket-подключение для real-time обмена данными

### Клиенты
- **Десктопное приложение** (Qt 6.10/Windows)
- **Веб-клиент** (в разработке)

## Структура проекта

```
slav_Messenger/
├── client/               # Десктопный клиент (Qt/C++)
│   ├── core/           # Ядро клиента (сетевой слой, криптография)
│   ├── ui/                # UI-формы Qt
│   ├── widgets/       # Кастомные виджеты
│   ├── models/        # Модели данных
│   ├── delegates/    # Делегаты для отображения
│   ├── forms/           # Дополнительные формы
│   ├── opus-1.5.2/   # Библиотека Opus для аудио
│   └── resources/    # Ресурсы (иконки, стили)
│
├── client_web/       # Веб-клиент (в разработке)
│
├── server/                         # Серверная часть
│   ├── main.cpp                # C++ сервер
│   ├── main.go                  # Go сервер (альтернатива)
│   ├── server.cpp/h           # Логика сервера
│   ├── cryptoutils.cpp/h     # Криптографические утилиты
│   ├── structures.h            # Структуры протокола
│   ├── database/               # Работа с БД
│   └── monocypher.c/h # Библиотека шифрования
│
└── executables/      # Готовые сборки
```

## Технологический стек

### Клиент
- **Qt 6.10** (Widgets)
- **C++17/20**
- **Opus 1.5.2** (аудио кодек)
- **Monocypher** (криптография)
- **WebSocket** (Qt WebSockets)

### Сервер
- **C++** (основной вариант)
- **Go** (альтернативная реализация)
- **PostgreSQL** / **SQLite** (база данных)
- **WebSocket** для клиентских подключений

## Установка и сборка

### Требования

#### Для клиента
- Qt 6.10 (Qt Creator рекомендуется)
- MinGW или MSVC (Windows)
- CMake или qmake
- Opus library (включена в проект)

#### Для сервера (C++)
- C++17/20 компилятор (GCC/Clang/MSVC)
- PostgreSQL development libraries

#### Для сервера (Go)
- Go 1.18+
- PostgreSQL driver

### Сборка клиента

```bash
cd client
qmake client.pro
make
# или откройте client.pro в Qt Creator и нажмите Build
```

### Сборка сервера (C++)

```bash
cd server
qmake server.pro
make
# или откройте server.pro в Qt Creator и нажмите Build
```

### Запуск сервера (Go)

```bash
cd server
go mod download
go run main.go
```

## Использование

1. **Запустите сервер** на VPS или локально
2. **Настройте подключение** в клиенте (укажите IP:порт сервера)
3. **Зарегистрируйтесь** или войдите в существующий аккаунт
4. **Начните** общение

## Протокол и безопасность

### Обмен ключами
- Клиенты генерируют пары ключей X25519 (приватный/публичный)
- Публичные ключи обмениваются через сервер
- Формируется общий секрет для симметричного шифрования

### Шифрование сообщений
- Алгоритм: **ChaCha20-Poly1305** (AEAD)
- Каждое сообщение шифруется уникальным nonce

### Аудио-звонки
- Кодек: **Opus** (высокое качество, низкая задержка)
- Аудио-поток не шифруется перед передачей

## Разработка

### Структура кода клиента
- `MainWindow` — главное окно приложения
- `core/` — сетевой модуль, криптография, протокол
- `models/` — модели для списков контактов, сообщений
- `delegates/` — делегаты для списков контактов, сообщений
- `forms/` — UI-файлы Qt Designer (.ui) для визуального редактора форм
- `widgets/` — компоненты пользовательского интерфейса
- `utils/` — вспомогательные функции
- `resources/` — ресурсы проекта (иконки, изображения, стили)
- `ui/` — сопотуствующие UI-файлы Qt Designer
- `opus-1.5.2/` — библиотека Opus для аудио кодирования/декодирования

### API сервера
Сервер предоставляет API для:
- Регистрации и аутентификации
- Отправки/получения сообщений
- Обмена публичными ключами
- Управления контактами и группами
- VoIP сигнализации

---

**Примечание:** Проект является учебным/личным.
